!function(e,t){for(var i in t)e[i]=t[i]}(exports,function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){e.exports=require("vscode")},function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(s,o){function n(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const s=i(0),o=i(2);function n(e,t){e&&"/sample-folder/large.ts"===e.fileName?t.set(e.uri,[{code:"",message:"cannot assign twice to immutable variable `storeHouses`",range:new s.Range(new s.Position(4,12),new s.Position(4,32)),severity:s.DiagnosticSeverity.Error,source:"",relatedInformation:[new s.DiagnosticRelatedInformation(new s.Location(e.uri,new s.Range(new s.Position(1,8),new s.Position(1,9))),"first assignment to `x`")]},{code:"",message:"function does not follow naming conventions",range:new s.Range(new s.Position(7,10),new s.Position(7,23)),severity:s.DiagnosticSeverity.Warning,source:""}]):t.clear()}t.activate=function(e){if("object"==typeof navigator){(function(e){const t=new o.MemFS;return e.subscriptions.push(t),t})(e).seed(),function(e){const t=s.languages.createDiagnosticCollection("test");s.window.activeTextEditor&&n(s.window.activeTextEditor.document,t);e.subscriptions.push(s.window.onDidChangeActiveTextEditor(e=>{e&&n(e.document,t)}))}(e),function(){class e{constructor(e){this.workspaceRoot=e}provideTasks(){return r(this,void 0,void 0,(function*(){return this.getTasks()}))}resolveTask(e){if(e.definition.flavor){const t=e.definition;return this.getTask(t.flavor,t.flags?t.flags:[],t)}}getTasks(){if(void 0!==this.tasks)return this.tasks;const e=[["watch","incremental"],["incremental"],[]];return this.tasks=[],["32","64"].forEach(t=>{e.forEach(e=>{this.tasks.push(this.getTask(t,e))})}),this.tasks}getTask(i,o,n){return void 0===n&&(n={type:e.CustomBuildScriptType,flavor:i,flags:o}),new s.Task(n,s.TaskScope.Workspace,`${i} ${o.join(" ")}`,e.CustomBuildScriptType,new s.CustomExecution(()=>r(this,void 0,void 0,(function*(){return new t(this.workspaceRoot,i,o,()=>this.sharedState,e=>this.sharedState=e)}))))}}e.CustomBuildScriptType="custombuildscript";class t{constructor(e,t,i,r,o){this.workspaceRoot=e,this.flags=i,this.getSharedState=r,this.setSharedState=o,this.writeEmitter=new s.EventEmitter,this.onDidWrite=this.writeEmitter.event,this.closeEmitter=new s.EventEmitter,this.onDidClose=this.closeEmitter.event}open(e){if(this.flags.indexOf("watch")>-1){let e=this.workspaceRoot+"/customBuildFile";this.fileWatcher=s.workspace.createFileSystemWatcher(e),this.fileWatcher.onDidChange(()=>this.doBuild()),this.fileWatcher.onDidCreate(()=>this.doBuild()),this.fileWatcher.onDidDelete(()=>this.doBuild())}this.doBuild()}close(){this.fileWatcher&&this.fileWatcher.dispose()}doBuild(){return r(this,void 0,void 0,(function*(){return new Promise(e=>{this.writeEmitter.fire("Starting build...\r\n");let t=this.flags.indexOf("incremental")>-1;t&&(this.getSharedState()?this.writeEmitter.fire("Using last build results: "+this.getSharedState()+"\r\n"):(t=!1,this.writeEmitter.fire("No result from last build. Doing full build.\r\n"))),setTimeout(()=>{const t=new Date;this.setSharedState(t.toTimeString()+" "+t.toDateString()),this.writeEmitter.fire("Build complete.\r\n\r\n"),-1===this.flags.indexOf("watch")&&(this.closeEmitter.fire(),e())},t?1e3:4e3)})}))}}s.tasks.registerTaskProvider(e.CustomBuildScriptType,new e(s.workspace.rootPath))}(),s.commands.executeCommand("vscode.open",s.Uri.parse("memfs:/sample-folder/large.ts"))}}},function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(s,o){function n(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MemFS=t.Directory=t.File=void 0;const s=i(0),o=i(3);class n{constructor(e,t){this.uri=e,this.type=s.FileType.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=t}}t.File=n;class a{constructor(e,t){this.uri=e,this.type=s.FileType.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=t,this.entries=new Map}}t.Directory=a;const c=new TextEncoder;class l{constructor(){this.root=new a(s.Uri.parse("memfs:/"),""),this._emitter=new s.EventEmitter,this._bufferedEvents=[],this.onDidChangeFile=this._emitter.event,this._textDecoder=new TextDecoder,this.disposable=s.Disposable.from(s.workspace.registerFileSystemProvider(l.scheme,this,{isCaseSensitive:!0}),s.workspace.registerFileSearchProvider(l.scheme,this),s.workspace.registerTextSearchProvider(l.scheme,this))}dispose(){var e;null===(e=this.disposable)||void 0===e||e.dispose()}seed(){this.createDirectory(s.Uri.parse("memfs:/sample-folder/")),this.dataPromise=new Promise(e=>{o.getTreeData().then((t=[])=>{t.forEach(([e,t])=>{t===s.FileType.File?this.writeFile(s.Uri.parse("memfs:/"+e),c.encode('console.log("JavaScript")'),{create:!0,overwrite:!0}):this.createDirectory(s.Uri.parse("memfs:/"+e))}),e(void 0)})})}stat(e){return this._lookup(e,!1)}readDirectory(e){return r(this,void 0,void 0,(function*(){yield this.dataPromise;const t=this._lookupAsDirectory(e,!1);let i=[];for(const[e,r]of t.entries)i.push([e,r.type]);return i}))}readFile(e){const t=this._lookupAsFile(e,!1).data;if(t)return t;throw s.FileSystemError.FileNotFound()}writeFile(e,t,i){let r=this._basename(e.path),o=this._lookupParentDirectory(e),c=o.entries.get(r);if(c instanceof a)throw s.FileSystemError.FileIsADirectory(e);if(!c&&!i.create)throw s.FileSystemError.FileNotFound(e);if(c&&i.create&&!i.overwrite)throw s.FileSystemError.FileExists(e);c||(c=new n(e,r),o.entries.set(r,c),this._fireSoon({type:s.FileChangeType.Created,uri:e})),c.mtime=Date.now(),c.size=t.byteLength,c.data=t,this._fireSoon({type:s.FileChangeType.Changed,uri:e})}rename(e,t,i){if(!i.overwrite&&this._lookup(t,!0))throw s.FileSystemError.FileExists(t);let r=this._lookup(e,!1),o=this._lookupParentDirectory(e),n=this._lookupParentDirectory(t),a=this._basename(t.path);o.entries.delete(r.name),r.name=a,n.entries.set(a,r),this._fireSoon({type:s.FileChangeType.Deleted,uri:e},{type:s.FileChangeType.Created,uri:t})}delete(e){let t=e.with({path:this._dirname(e.path)}),i=this._basename(e.path),r=this._lookupAsDirectory(t,!1);if(!r.entries.has(i))throw s.FileSystemError.FileNotFound(e);r.entries.delete(i),r.mtime=Date.now(),r.size-=1,this._fireSoon({type:s.FileChangeType.Changed,uri:t},{uri:e,type:s.FileChangeType.Deleted})}createDirectory(e){let t=this._basename(e.path),i=e.with({path:this._dirname(e.path)}),r=this._lookupAsDirectory(i,!1),o=new a(e,t);r.entries.set(o.name,o),r.mtime=Date.now(),r.size+=1,this._fireSoon({type:s.FileChangeType.Changed,uri:i},{type:s.FileChangeType.Created,uri:e})}_lookup(e,t){let i=e.path.split("/"),r=this.root;for(const o of i){if(!o)continue;let i;if(r instanceof a&&(i=r.entries.get(o)),!i){if(t)return;throw s.FileSystemError.FileNotFound(e)}r=i}return r}_lookupAsDirectory(e,t){let i=this._lookup(e,t);if(i instanceof a)return i;throw s.FileSystemError.FileNotADirectory(e)}_lookupAsFile(e,t){let i=this._lookup(e,t);if(i instanceof n)return i;throw s.FileSystemError.FileIsADirectory(e)}_lookupParentDirectory(e){const t=e.with({path:this._dirname(e.path)});return this._lookupAsDirectory(t,!1)}watch(e){return new s.Disposable(()=>{})}_fireSoon(...e){this._bufferedEvents.push(...e),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout(()=>{this._emitter.fire(this._bufferedEvents),this._bufferedEvents.length=0},5)}_basename(e){return(e=this._rtrim(e,"/"))?e.substr(e.lastIndexOf("/")+1):""}_dirname(e){return(e=this._rtrim(e,"/"))?e.substr(0,e.lastIndexOf("/")):"/"}_rtrim(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(0===i||0===r)return e;let s=r,o=-1;for(;o=e.lastIndexOf(t,s-1),-1!==o&&o+i===s;){if(0===o)return"";s=o}return e.substring(0,s)}_getFiles(){const e=new Set;return this._doGetFiles(this.root,e),e}_doGetFiles(e,t){e.entries.forEach(e=>{e instanceof n?t.add(e):this._doGetFiles(e,t)})}_convertSimple2RegExpPattern(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}provideFileSearchResults(e,t,i){return this._findFiles(e.pattern)}_findFiles(e){const t=this._getFiles(),i=[],r=e?new RegExp(this._convertSimple2RegExpPattern(e)):null;for(const e of t)r&&!r.exec(e.name)||i.push(e.uri);return i}provideTextSearchResults(e,t,i,r){const o=this._findFiles(t.includes[0]);if(o)for(const t of o){const r=this._textDecoder.decode(this.readFile(t)).split("\n");for(let o=0;o<r.length;o++){const n=r[o],a=n.indexOf(e.pattern);-1!==a&&i.report({uri:t,ranges:new s.Range(new s.Position(o,a),new s.Position(o,a+e.pattern.length)),preview:{text:n,matches:new s.Range(new s.Position(0,a),new s.Position(0,a+e.pattern.length))}})}}return{limitHit:!1}}}t.MemFS=l,l.scheme="memfs"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeData=void 0,t.getTreeData=function(){return fetch("http://localhost:3000/static/devextensions/src/mock/treeData.json",{headers:{accept:"*/*","accept-language":"zh-CN,zh;q=0.9","if-modified-since":"Wed, 21 Jun 2023 03:17:55 GMT","sec-ch-ua":'"Chromium";v="115", "Not/A)Brand";v="99"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"},referrer:"http://localhost:3000/",referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"omit"}).then(e=>e.json())}}]));
//# sourceMappingURL=extension.js.map